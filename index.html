<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SDD è§„æ ¼é©±åŠ¨å¼€å‘å­¦é™¢</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #1a1a2e;
      --secondary: #16213e;
      --accent: #0f4c75;
      --highlight: #3282b8;
      --light: #bbe1fa;
      --text: #e8f1f5;
      --code-bg: #0d1117;
      --success: #2ea043;
      --warning: #f85149;
    }

    body {
      font-family: 'Crimson Pro', serif;
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: var(--text);
      line-height: 1.7;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 50%, rgba(15, 76, 117, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(50, 130, 184, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      position: relative;
      z-index: 1;
    }

    header {
      text-align: center;
      padding: 60px 20px 40px;
      animation: fadeInDown 0.8s ease-out;
    }

    h1 {
      font-size: 3.5rem;
      font-weight: 700;
      margin-bottom: 15px;
      background: linear-gradient(45deg, var(--light), var(--highlight));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -1px;
    }

    .subtitle {
      font-size: 1.3rem;
      color: var(--light);
      opacity: 0.9;
      font-weight: 400;
    }

    .author {
      font-size: 1.1rem;
      color: var(--light);
      opacity: 0.85;
      margin-top: 15px;
      font-weight: 400;
      letter-spacing: 1px;
    }

    .nav-tabs {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin: 40px 0;
      animation: fadeIn 1s ease-out 0.3s backwards;
    }

    .tab-btn {
      padding: 12px 24px;
      background: rgba(15, 76, 117, 0.3);
      border: 2px solid var(--accent);
      color: var(--light);
      cursor: pointer;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.95rem;
      font-weight: 600;
      border-radius: 8px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(10px);
    }

    .tab-btn:hover {
      background: rgba(15, 76, 117, 0.6);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(50, 130, 184, 0.3);
    }

    .tab-btn.active {
      background: var(--highlight);
      border-color: var(--light);
      color: white;
      box-shadow: 0 4px 15px rgba(50, 130, 184, 0.5);
    }

    .lesson {
      background: rgba(22, 33, 62, 0.6);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(50, 130, 184, 0.3);
      border-radius: 16px;
      padding: 40px;
      margin: 30px 0;
      display: none;
      animation: slideIn 0.5s ease-out;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    }

    .lesson.active {
      display: block;
    }

    .lesson h2 {
      font-size: 2.2rem;
      margin-bottom: 25px;
      color: var(--light);
      border-bottom: 3px solid var(--highlight);
      padding-bottom: 15px;
    }

    .lesson h3 {
      font-size: 1.6rem;
      margin: 30px 0 15px;
      color: var(--highlight);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .lesson h3::before {
      content: 'â–¸';
      color: var(--accent);
      font-size: 1.4rem;
    }

    .lesson p {
      margin: 15px 0;
      font-size: 1.15rem;
      line-height: 1.8;
    }

    .lesson ul {
      margin: 15px 0 15px 30px;
      font-size: 1.1rem;
    }

    .lesson li {
      margin: 10px 0;
      padding-left: 10px;
    }

    code {
      font-family: 'JetBrains Mono', monospace;
      background: var(--code-bg);
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 0.95em;
      color: var(--light);
      border: 1px solid var(--accent);
    }

    pre {
      background: var(--code-bg);
      padding: 20px;
      border-radius: 10px;
      overflow-x: auto;
      margin: 20px 0;
      border-left: 4px solid var(--highlight);
      box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.5);
    }

    pre code {
      background: none;
      padding: 0;
      border: none;
      display: block;
      line-height: 1.6;
    }

    .quiz-section, .case-section {
      background: rgba(15, 76, 117, 0.2);
      padding: 30px;
      border-radius: 12px;
      margin: 30px 0;
      border: 2px solid var(--accent);
    }

    .quiz-section h3, .case-section h3 {
      color: var(--light);
      margin-bottom: 20px;
    }

    .question {
      background: rgba(22, 33, 62, 0.8);
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      border-left: 4px solid var(--highlight);
    }

    .question h4 {
      color: var(--light);
      margin-bottom: 15px;
      font-size: 1.2rem;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin: 15px 0;
    }

    .option {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px;
      background: rgba(15, 76, 117, 0.3);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
      border: 2px solid transparent;
    }

    .option:hover {
      background: rgba(15, 76, 117, 0.5);
      border-color: var(--highlight);
    }

    .option input[type="radio"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }

    .check-btn {
      padding: 12px 30px;
      background: var(--highlight);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'JetBrains Mono', monospace;
      margin-top: 15px;
    }

    .check-btn:hover {
      background: var(--accent);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(50, 130, 184, 0.4);
    }

    .result {
      margin-top: 15px;
      padding: 15px;
      border-radius: 6px;
      font-weight: 600;
      display: none;
    }

    .result.correct {
      background: rgba(46, 160, 67, 0.2);
      border: 2px solid var(--success);
      color: var(--success);
      display: block;
    }

    .result.incorrect {
      background: rgba(248, 81, 73, 0.2);
      border: 2px solid var(--warning);
      color: var(--warning);
      display: block;
    }

    .case-study {
      background: rgba(13, 17, 23, 0.6);
      padding: 25px;
      border-radius: 8px;
      margin: 20px 0;
      border-left: 4px solid var(--success);
    }

    .case-study h4 {
      color: var(--success);
      margin-bottom: 15px;
      font-size: 1.3rem;
    }

    .references {
      background: rgba(187, 225, 250, 0.05);
      padding: 25px;
      border-radius: 8px;
      margin: 30px 0;
      border: 2px dashed var(--light);
    }

    .references h3 {
      color: var(--light);
      margin-bottom: 15px;
    }

    .references ul {
      list-style: none;
      margin-left: 0;
    }

    .references li {
      margin: 12px 0;
      padding: 10px;
      background: rgba(15, 76, 117, 0.2);
      border-radius: 6px;
    }

    .references a {
      color: var(--highlight);
      text-decoration: none;
      font-weight: 600;
      transition: color 0.2s;
    }

    .references a:hover {
      color: var(--light);
      text-decoration: underline;
    }

    .ai-assistant {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 1000;
    }

    .ai-toggle {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--highlight), var(--accent));
      border: 3px solid var(--light);
      color: white;
      font-size: 2rem;
      cursor: pointer;
      box-shadow: 0 8px 30px rgba(50, 130, 184, 0.5);
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .ai-toggle:hover {
      transform: scale(1.1) rotate(5deg);
      box-shadow: 0 12px 40px rgba(50, 130, 184, 0.7);
    }

    .ai-panel {
      position: fixed;
      bottom: 120px;
      right: 30px;
      width: 400px;
      max-width: calc(100vw - 60px);
      background: rgba(22, 33, 62, 0.95);
      backdrop-filter: blur(20px);
      border: 2px solid var(--highlight);
      border-radius: 16px;
      padding: 25px;
      display: none;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      animation: slideUp 0.3s ease-out;
    }

    .ai-panel.active {
      display: block;
    }

    .ai-panel h3 {
      margin-bottom: 15px;
      color: var(--light);
    }

    .lang-selector {
      display: flex;
      gap: 8px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .lang-btn {
      padding: 6px 12px;
      background: rgba(15, 76, 117, 0.3);
      border: 1px solid var(--accent);
      border-radius: 6px;
      color: var(--text);
      cursor: pointer;
      font-size: 0.85rem;
      transition: all 0.2s;
      font-family: 'JetBrains Mono', monospace;
    }

    .lang-btn:hover {
      background: rgba(15, 76, 117, 0.5);
      border-color: var(--highlight);
    }

    .lang-btn.active {
      background: var(--highlight);
      border-color: var(--light);
      color: white;
    }

    .input-group {
      display: flex;
      gap: 10px;
      margin: 15px 0;
    }

    #userInput {
      flex: 1;
      padding: 12px;
      background: rgba(13, 17, 23, 0.8);
      border: 2px solid var(--accent);
      border-radius: 8px;
      color: var(--text);
      font-size: 1rem;
      font-family: 'Crimson Pro', serif;
    }

    #userInput:focus {
      outline: none;
      border-color: var(--highlight);
    }

    .voice-btn, .send-btn {
      padding: 12px 18px;
      background: var(--highlight);
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      font-size: 1.2rem;
      transition: all 0.2s;
    }

    .voice-btn:hover, .send-btn:hover {
      background: var(--accent);
      transform: scale(1.05);
    }

    .voice-btn.recording {
      background: var(--warning);
      animation: pulse 1s infinite;
    }

    #aiResponse {
      background: rgba(13, 17, 23, 0.6);
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      min-height: 100px;
      max-height: 300px;
      overflow-y: auto;
      border: 1px solid var(--accent);
    }

    .tts-btn {
      margin-top: 10px;
      padding: 8px 16px;
      background: var(--success);
      border: none;
      border-radius: 6px;
      color: white;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s;
      display: none;
    }

    .tts-btn:hover {
      background: #26843a;
    }

    .tts-btn.active {
      display: inline-block;
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    @media (max-width: 768px) {
      h1 { font-size: 2.5rem; }
      .subtitle { font-size: 1.1rem; }
      .lesson { padding: 25px; }
      .lesson h2 { font-size: 1.8rem; }
      .ai-panel { width: calc(100vw - 40px); right: 20px; }
      .ai-toggle { width: 60px; height: 60px; font-size: 1.6rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>SDD è§„æ ¼é©±åŠ¨å¼€å‘å­¦é™¢</h1>
      <p class="subtitle">Spec-Driven Development Â· ä»éœ€æ±‚åˆ°å®ç°çš„ç³»ç»ŸåŒ–æ–¹æ³•è®º</p>
      <p class="author">å¤©æ´¥è´¢ç»å¤§å­¦ç»Ÿè®¡å­¦é™¢æ•™æˆ &nbsp;&nbsp;&nbsp;&nbsp; é¾šå‡¤ä¹¾</p>
    </header>

    <div class="nav-tabs">
      <button class="tab-btn active" data-lesson="1">ç¬¬1è®²</button>
      <button class="tab-btn" data-lesson="2">ç¬¬2è®²</button>
      <button class="tab-btn" data-lesson="3">ç¬¬3è®²</button>
      <button class="tab-btn" data-lesson="4">ç¬¬4è®²</button>
      <button class="tab-btn" data-lesson="5">ç¬¬5è®²</button>
      <button class="tab-btn" data-lesson="6">ç¬¬6è®²</button>
      <button class="tab-btn" data-lesson="7">ç¬¬7è®²</button>
      <button class="tab-btn" data-lesson="8">ç¬¬8è®²</button>
    </div>

    <!-- ç¬¬1è®² -->
    <div class="lesson active" id="lesson1">
      <h2>ç¬¬1è®²ï¼šä»€ä¹ˆæ˜¯SDDï¼Ÿ</h2>
      
      <p>Spec-Driven Developmentï¼ˆè§„æ ¼é©±åŠ¨å¼€å‘ï¼‰æ˜¯ä¸€ç§ä»¥<strong>æ˜ç¡®è§„æ ¼è¯´æ˜</strong>ä¸ºæ ¸å¿ƒçš„è½¯ä»¶å¼€å‘æ–¹æ³•è®ºã€‚ä¸ä¼ ç»Ÿçš„è¾¹å†™è¾¹æ”¹ä¸åŒï¼ŒSDDå¼ºè°ƒå…ˆå®šä¹‰æ¸…æ™°çš„è§„æ ¼ï¼ˆSpecificationï¼‰ï¼Œå†è¿›è¡Œå®ç°ã€‚</p>

      <h3>æ ¸å¿ƒç†å¿µ</h3>
      <ul>
        <li><strong>è§„æ ¼å…ˆè¡Œ</strong>ï¼šåœ¨ç¼–ç å‰æ˜ç¡®å®šä¹‰ç³»ç»Ÿè¡Œä¸ºã€æ¥å£ã€æ•°æ®ç»“æ„</li>
        <li><strong>å¥‘çº¦æ˜ç¡®</strong>ï¼šé€šè¿‡è§„æ ¼æ–‡æ¡£å»ºç«‹å¼€å‘è€…ã€æµ‹è¯•è€…ã€ç”¨æˆ·ä¹‹é—´çš„å…±è¯†</li>
        <li><strong>å¯éªŒè¯æ€§</strong>ï¼šè§„æ ¼å¯è¢«è½¬åŒ–ä¸ºæµ‹è¯•ç”¨ä¾‹ï¼Œç¡®ä¿å®ç°ç¬¦åˆé¢„æœŸ</li>
        <li><strong>å‡å°‘è¿”å·¥</strong>ï¼šæå‰å‘ç°éœ€æ±‚ä¸ä¸€è‡´ï¼Œé™ä½åæœŸä¿®æ”¹æˆæœ¬</li>
      </ul>

      <h3>SDD vs Vibe Coding</h3>
      <p><strong>Vibe Coding</strong>ï¼ˆç›´è§‰ç¼–ç¨‹ï¼‰é€‚åˆå¿«é€ŸåŸå‹ã€æ¢ç´¢æ€§å¼€å‘ï¼Œä½†å®¹æ˜“å¯¼è‡´ï¼š</p>
      <ul>
        <li>éœ€æ±‚ç†è§£åå·®</li>
        <li>ä»£ç ç»“æ„æ··ä¹±</li>
        <li>éš¾ä»¥ç»´æŠ¤å’Œæ‰©å±•</li>
      </ul>
      <p><strong>SDD</strong>é€šè¿‡è§„æ ¼æ–‡æ¡£è§£å†³è¿™äº›é—®é¢˜ï¼Œé€‚åˆéœ€è¦ä¸¥è°¨æ€§çš„é¡¹ç›®ã€‚</p>

      <h3>ç®€å•ç¤ºä¾‹</h3>
      <pre><code>// Vibe Coding é£æ ¼
function processData(data) {
  // ç›´æ¥å¼€å§‹å†™é€»è¾‘ï¼Œè¾¹æƒ³è¾¹å†™
  let result = [];
  for (let item of data) {
    if (item.value > 10) {
      result.push(item.name);
    }
  }
  return result;
}

// SDD é£æ ¼
/**
 * è§„æ ¼ï¼šå¤„ç†æ•°æ®é›†åˆ
 * è¾“å…¥ï¼šdata: Array<{name: string, value: number}>
 * è¾“å‡ºï¼šArray<string> - æ‰€æœ‰value>10çš„nameé›†åˆ
 * å‰ç½®æ¡ä»¶ï¼šdataä¸ä¸ºnull
 * åç½®æ¡ä»¶ï¼šè¿”å›æ•°ç»„å·²æ’åº
 */
function processData(data) {
  if (!data) throw new Error('Invalid input');
  return data
    .filter(item => item.value > 10)
    .map(item => item.name)
    .sort();
}</code></pre>

      <div class="quiz-section">
        <h3>ğŸ“ éšå ‚å°è€ƒ</h3>
        <div class="question">
          <h4>1. SDDçš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
          <div class="options">
            <label class="option">
              <input type="radio" name="q1" value="A">
              <span>A. ç¼–ç é€Ÿåº¦æ›´å¿«</span>
            </label>
            <label class="option">
              <input type="radio" name="q1" value="B">
              <span>B. æå‰æ˜ç¡®éœ€æ±‚ï¼Œå‡å°‘è¿”å·¥</span>
            </label>
            <label class="option">
              <input type="radio" name="q1" value="C">
              <span>C. ä¸éœ€è¦å†™æ–‡æ¡£</span>
            </label>
            <label class="option">
              <input type="radio" name="q1" value="D">
              <span>D. å¯ä»¥éšæ„ä¿®æ”¹è®¾è®¡</span>
            </label>
          </div>
          <button class="check-btn" onclick="checkAnswer('q1', 'B', this)">æäº¤ç­”æ¡ˆ</button>
          <div class="result"></div>
        </div>
      </div>

      <div class="case-section">
        <h3>ğŸ’¼ å®æˆ˜æ¡ˆä¾‹</h3>
        <div class="case-study">
          <h4>åœºæ™¯ï¼šå¼€å‘ç”¨æˆ·æ³¨å†ŒAPI</h4>
          <p><strong>Vibeæ–¹å¼</strong>ï¼šç›´æ¥å†™ä»£ç ï¼Œå‘ç°å¯†ç åŠ å¯†å¿˜äº†ï¼Œè¿”å›æ ¼å¼ä¸ç»Ÿä¸€...</p>
          <p><strong>SDDæ–¹å¼</strong>ï¼š</p>
          <pre><code>è§„æ ¼æ–‡æ¡£ï¼š
POST /api/register
è¾“å…¥ï¼š{ email: string, password: string }
éªŒè¯ï¼šemailæ ¼å¼æœ‰æ•ˆï¼Œpasswordâ‰¥8å­—ç¬¦
å¤„ç†ï¼šå¯†ç BCryptåŠ å¯†ï¼Œå­˜å‚¨åˆ°æ•°æ®åº“
è¾“å‡ºï¼š{ success: boolean, userId?: string, error?: string }
é”™è¯¯ç ï¼š400(å‚æ•°é”™è¯¯), 409(é‚®ç®±å·²å­˜åœ¨), 500(æœåŠ¡å™¨é”™è¯¯)</code></pre>
          <p><strong>ç»“æœ</strong>ï¼šå¼€å‘ã€æµ‹è¯•ã€å‰ç«¯éƒ½æŒ‰åŒä¸€è§„æ ¼å·¥ä½œï¼Œé›¶æ²Ÿé€šæˆæœ¬ï¼</p>
        </div>
      </div>

      <div class="references">
        <h3>ğŸ“š å‚è€ƒèµ„æ–™</h3>
        <ul>
          <li>ğŸ‡¨ğŸ‡³ ä¸­æ–‡ï¼š<a href="https://www.cnblogs.com/strick/p/16628713.html" target="_blank">è½¯ä»¶å·¥ç¨‹ä¸­çš„è§„æ ¼è¯´æ˜æ–¹æ³•</a></li>
          <li>ğŸ‡ºğŸ‡¸ English: <a href="https://en.wikipedia.org/wiki/Specification_(technical_standard)" target="_blank">Specification (Technical Standard) - Wikipedia</a></li>
        </ul>
      </div>
    </div>

    <!-- ç¬¬2è®² -->
    <div class="lesson" id="lesson2">
      <h2>ç¬¬2è®²ï¼šç¼–å†™ç¬¬ä¸€ä»½è§„æ ¼æ–‡æ¡£</h2>
      
      <p>ä¸€ä»½å¥½çš„è§„æ ¼æ–‡æ¡£åº”åŒ…å«ï¼š<strong>è¾“å…¥ã€è¾“å‡ºã€å‰ç½®æ¡ä»¶ã€åç½®æ¡ä»¶ã€å¼‚å¸¸å¤„ç†</strong>ã€‚</p>

      <h3>è§„æ ¼æ–‡æ¡£ç»“æ„</h3>
      <pre><code>åŠŸèƒ½åç§°ï¼š[ç®€æ´æè¿°]
ç›®çš„ï¼š[è§£å†³ä»€ä¹ˆé—®é¢˜]
è¾“å…¥å‚æ•°ï¼š
  - å‚æ•°1: ç±»å‹ - è¯´æ˜
  - å‚æ•°2: ç±»å‹ - è¯´æ˜
å‰ç½®æ¡ä»¶ï¼š[è°ƒç”¨å‰å¿…é¡»æ»¡è¶³çš„çŠ¶æ€]
å¤„ç†é€»è¾‘ï¼š[æ ¸å¿ƒæ­¥éª¤]
è¾“å‡ºç»“æœï¼š[è¿”å›ä»€ä¹ˆ]
åç½®æ¡ä»¶ï¼š[è°ƒç”¨åç³»ç»ŸçŠ¶æ€]
å¼‚å¸¸å¤„ç†ï¼š[å¯èƒ½çš„é”™è¯¯åŠå¤„ç†æ–¹å¼]</code></pre>

      <h3>å®ä¾‹ï¼šè®¡ç®—å™¨çš„åŠ æ³•åŠŸèƒ½</h3>
      <pre><code>åŠŸèƒ½åç§°ï¼šadd(a, b)
ç›®çš„ï¼šè®¡ç®—ä¸¤ä¸ªæ•°å­—çš„å’Œ
è¾“å…¥å‚æ•°ï¼š
  - a: number - ç¬¬ä¸€ä¸ªåŠ æ•°
  - b: number - ç¬¬äºŒä¸ªåŠ æ•°
å‰ç½®æ¡ä»¶ï¼šaå’Œbå‡ä¸ºæœ‰æ•ˆæ•°å­—
å¤„ç†é€»è¾‘ï¼šè¿”å›a + bçš„ç»“æœ
è¾“å‡ºç»“æœï¼šnumber - ä¸¤æ•°ä¹‹å’Œ
åç½®æ¡ä»¶ï¼šæ— å‰¯ä½œç”¨ï¼Œä¸æ”¹å˜å…¨å±€çŠ¶æ€
å¼‚å¸¸å¤„ç†ï¼š
  - è‹¥aæˆ–béæ•°å­—ï¼ŒæŠ›å‡ºTypeError
  - è‹¥ç»“æœæº¢å‡ºï¼Œè¿”å›Infinity</code></pre>

      <h3>å…³é”®è¦ç´ </h3>
      <ul>
        <li><strong>ç²¾ç¡®æ€§</strong>ï¼šé¿å…æ¨¡ç³Šè¯æ±‡å¦‚"å¤§æ¦‚"ã€"å¯èƒ½"</li>
        <li><strong>å®Œæ•´æ€§</strong>ï¼šè¦†ç›–æ‰€æœ‰è¾“å…¥æƒ…å†µå’Œè¾¹ç•Œæ¡ä»¶</li>
        <li><strong>å¯æµ‹æ€§</strong>ï¼šæ¯æ¡è§„æ ¼éƒ½èƒ½è½¬åŒ–ä¸ºæµ‹è¯•ç”¨ä¾‹</li>
      </ul>

      <div class="quiz-section">
        <h3>ğŸ“ éšå ‚å°è€ƒ</h3>
        <div class="question">
          <h4>2. è§„æ ¼æ–‡æ¡£å¿…é¡»åŒ…å«å“ªäº›æ ¸å¿ƒéƒ¨åˆ†ï¼Ÿ</h4>
          <div class="options">
            <label class="option">
              <input type="radio" name="q2" value="A">
              <span>A. åªéœ€è¦è¾“å…¥å’Œè¾“å‡º</span>
            </label>
            <label class="option">
              <input type="radio" name="q2" value="B">
              <span>B. è¾“å…¥ã€è¾“å‡ºã€å‰åç½®æ¡ä»¶ã€å¼‚å¸¸å¤„ç†</span>
            </label>
            <label class="option">
              <input type="radio" name="q2" value="C">
              <span>C. ä»£ç æ³¨é‡Šå³å¯</span>
            </label>
            <label class="option">
              <input type="radio" name="q2" value="D">
              <span>D. åªéœ€è¦åŠŸèƒ½æè¿°</span>
            </label>
          </div>
          <button class="check-btn" onclick="checkAnswer('q2', 'B', this)">æäº¤ç­”æ¡ˆ</button>
          <div class="result"></div>
        </div>
      </div>

      <div class="case-section">
        <h3>ğŸ’¼ å®æˆ˜æ¡ˆä¾‹</h3>
        <div class="case-study">
          <h4>åœºæ™¯ï¼šç”µå•†è´­ç‰©è½¦ç»“ç®—åŠŸèƒ½</h4>
          <p><strong>ç³Ÿç³•çš„è§„æ ¼</strong>ï¼š"è®¡ç®—è´­ç‰©è½¦æ€»ä»·ï¼Œè€ƒè™‘æŠ˜æ‰£"</p>
          <p><strong>ä¼˜ç§€çš„è§„æ ¼</strong>ï¼š</p>
          <pre><code>åŠŸèƒ½ï¼šcalculateCartTotal(items, coupon)
è¾“å…¥ï¼š
  - items: CartItem[] (å•†å“åˆ—è¡¨)
  - coupon: {type: 'percent'|'fixed', value: number} | null
å‰ç½®æ¡ä»¶ï¼šitemséç©ºï¼Œä»·æ ¼>0
é€»è¾‘ï¼š
  1. è®¡ç®—å•†å“å°è®¡ï¼šsum(item.price * item.quantity)
  2. åº”ç”¨ä¼˜æƒ åˆ¸ï¼š
     - percent: å°è®¡ * (1 - value/100)
     - fixed: max(å°è®¡ - value, 0)
  3. å››èˆäº”å…¥åˆ°2ä½å°æ•°
è¾“å‡ºï¼š{subtotal: number, discount: number, total: number}
å¼‚å¸¸ï¼šitemsä¸ºç©ºè¿”å›nullï¼Œcouponæ— æ•ˆå¿½ç•¥</code></pre>
        </div>
      </div>

      <div class="references">
        <h3>ğŸ“š å‚è€ƒèµ„æ–™</h3>
        <ul>
          <li>ğŸ‡¨ğŸ‡³ ä¸­æ–‡ï¼š<a href="https://www.zhihu.com/question/23444990" target="_blank">å¦‚ä½•ç¼–å†™æŠ€æœ¯è§„æ ¼æ–‡æ¡£ - çŸ¥ä¹</a></li>
          <li>ğŸ‡ºğŸ‡¸ English: <a href="https://stackoverflow.blog/2020/04/06/a-practical-guide-to-writing-technical-specs/" target="_blank">A Practical Guide to Writing Technical Specs</a></li>
        </ul>
      </div>
    </div>

    <!-- ç¬¬3è®² -->
    <div class="lesson" id="lesson3">
      <h2>ç¬¬3è®²ï¼šä»è§„æ ¼åˆ°æµ‹è¯•ç”¨ä¾‹</h2>
      
      <p>è§„æ ¼æ–‡æ¡£çš„ä»·å€¼åœ¨äº<strong>å¯éªŒè¯æ€§</strong>ã€‚æ¯æ¡è§„æ ¼éƒ½åº”èƒ½è½¬åŒ–ä¸ºè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p>

      <h3>TDDä¸SDDçš„ç»“åˆ</h3>
      <p>Test-Driven Developmentï¼ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰ä¸SDDå¤©ç„¶å¥‘åˆï¼š</p>
      <ul>
        <li>è§„æ ¼å®šä¹‰é¢„æœŸè¡Œä¸º</li>
        <li>æµ‹è¯•éªŒè¯å®ç°æ˜¯å¦ç¬¦åˆè§„æ ¼</li>
        <li>å½¢æˆ"è§„æ ¼â†’æµ‹è¯•â†’å®ç°"çš„é—­ç¯</li>
      </ul>

      <h3>ç¤ºä¾‹ï¼šå°†è§„æ ¼è½¬ä¸ºæµ‹è¯•</h3>
      <pre><code>// è§„æ ¼
function divide(a: number, b: number): number
// è¿”å›aé™¤ä»¥bçš„ç»“æœ
// å‰ç½®æ¡ä»¶ï¼šb â‰  0
// å¼‚å¸¸ï¼šb=0æ—¶æŠ›å‡ºDivisionByZeroError

// å¯¹åº”æµ‹è¯•
describe('divide', () => {
  test('æ­£å¸¸é™¤æ³•', () => {
    expect(divide(10, 2)).toBe(5);
  });
  
  test('å°æ•°ç»“æœ', () => {
    expect(divide(7, 3)).toBeCloseTo(2.333, 3);
  });
  
  test('é™¤ä»¥é›¶æŠ›å‡ºå¼‚å¸¸', () => {
    expect(() => divide(5, 0))
      .toThrow(DivisionByZeroError);
  });
  
  test('è´Ÿæ•°å¤„ç†', () => {
    expect(divide(-10, 2)).toBe(-5);
  });
});</code></pre>

      <h3>æµ‹è¯•è¦†ç›–è¦ç‚¹</h3>
      <ul>
        <li><strong>æ­£å¸¸è·¯å¾„</strong>ï¼šå…¸å‹è¾“å…¥çš„é¢„æœŸè¾“å‡º</li>
        <li><strong>è¾¹ç•Œæ¡ä»¶</strong>ï¼šæœ€å¤§å€¼ã€æœ€å°å€¼ã€é›¶ã€ç©ºå€¼</li>
        <li><strong>å¼‚å¸¸è·¯å¾„</strong>ï¼šé”™è¯¯è¾“å…¥çš„å¼‚å¸¸å¤„ç†</li>
        <li><strong>çŠ¶æ€å˜åŒ–</strong>ï¼šéªŒè¯å‰åç½®æ¡ä»¶</li>
      </ul>

      <div class="quiz-section">
        <h3>ğŸ“ éšå ‚å°è€ƒ</h3>
        <div class="question">
          <h4>3. ä¸ºä»€ä¹ˆSDDå¼ºè°ƒæµ‹è¯•çš„å¯éªŒè¯æ€§ï¼Ÿ</h4>
          <div class="options">
            <label class="option">
              <input type="radio" name="q3" value="A">
              <span>A. æµ‹è¯•å¯ä»¥è‡ªåŠ¨ç”Ÿæˆä»£ç </span>
            </label>
            <label class="option">
              <input type="radio" name="q3" value="B">
              <span>B. ç¡®ä¿å®ç°å®Œå…¨ç¬¦åˆè§„æ ¼å®šä¹‰</span>
            </label>
            <label class="option">
              <input type="radio" name="q3" value="C">
              <span>C. æµ‹è¯•å¯ä»¥æ›¿ä»£æ–‡æ¡£</span>
            </label>
            <label class="option">
              <input type="radio" name="q3" value="D">
              <span>D. ä¸éœ€è¦å†™è§„æ ¼</span>
            </label>
          </div>
          <button class="check-btn" onclick="checkAnswer('q3', 'B', this)">æäº¤ç­”æ¡ˆ</button>
          <div class="result"></div>
        </div>
      </div>

      <div class="case-section">
        <h3>ğŸ’¼ å®æˆ˜æ¡ˆä¾‹</h3>
        <div class="case-study">
          <h4>åœºæ™¯ï¼šå¯†ç å¼ºåº¦éªŒè¯å™¨</h4>
          <p><strong>è§„æ ¼</strong>ï¼š</p>
          <pre><code>validatePassword(pwd: string): {valid: boolean, errors: string[]}
è¦æ±‚ï¼š8-20å­—ç¬¦ï¼Œå«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šç¬¦å·è‡³å°‘3ç±»
è¿”å›ï¼švalid=trueè¡¨ç¤ºé€šè¿‡ï¼Œerrorsåˆ—å‡ºæ‰€æœ‰ä¸æ»¡è¶³çš„æ¡ä»¶</code></pre>
          <p><strong>æµ‹è¯•ç”¨ä¾‹</strong>ï¼š</p>
          <pre><code>test('å¼ºå¯†ç ', () => 
  expect(validatePassword('Abc123!@')).toEqual({valid:true, errors:[]})
);
test('å¤ªçŸ­', () => 
  expect(validatePassword('Ab1!')).toHaveProperty('valid', false)
);
test('ç¼ºå°‘æ•°å­—', () => 
  expect(validatePassword('Abcdefg!')).toHaveProperty('errors')
);</code></pre>
        </div>
      </div>

      <div class="references">
        <h3>ğŸ“š å‚è€ƒèµ„æ–™</h3>
        <ul>
          <li>ğŸ‡¨ğŸ‡³ ä¸­æ–‡ï¼š<a href="https://www.ruanyifeng.com/blog/2015/04/test-driven-development.html" target="_blank">æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰- é˜®ä¸€å³°</a></li>
          <li>ğŸ‡ºğŸ‡¸ English: <a href="https://martinfowler.com/bliki/TestDrivenDevelopment.html" target="_blank">Test-Driven Development - Martin Fowler</a></li>
        </ul>
      </div>
    </div>

    <!-- ç¬¬4è®² -->
    <div class="lesson" id="lesson4">
      <h2>ç¬¬4è®²ï¼šæ¥å£è®¾è®¡ä¸APIè§„æ ¼</h2>
      
      <p>APIæ˜¯ç³»ç»Ÿå¯¹å¤–çš„å¥‘çº¦ï¼ŒSDDåœ¨æ¥å£è®¾è®¡ä¸­å°¤ä¸ºé‡è¦ã€‚æ¸…æ™°çš„APIè§„æ ¼æ˜¯å‰åç«¯åä½œçš„åŸºç¡€ã€‚</p>

      <h3>RESTful APIè§„æ ¼è¦ç´ </h3>
      <pre><code>ç«¯ç‚¹ï¼šPOST /api/users
æè¿°ï¼šåˆ›å»ºæ–°ç”¨æˆ·
è¯·æ±‚å¤´ï¼šContent-Type: application/json
è¯·æ±‚ä½“ï¼š
{
  "username": string (3-20å­—ç¬¦ï¼Œå­—æ¯æ•°å­—),
  "email": string (æœ‰æ•ˆé‚®ç®±),
  "password": string (8+å­—ç¬¦)
}
å“åº”ï¼š
  201 Created: {"id": string, "username": string}
  400 Bad Request: {"error": string, "fields": string[]}
  409 Conflict: {"error": "ç”¨æˆ·åå·²å­˜åœ¨"}
  500 Internal Server Error: {"error": "æœåŠ¡å™¨é”™è¯¯"}
é™æµï¼šæ¯IP 100æ¬¡/å°æ—¶
è®¤è¯ï¼šæ— éœ€ï¼ˆå…¬å¼€ç«¯ç‚¹ï¼‰</code></pre>

      <h3>OpenAPI/Swaggerè§„èŒƒ</h3>
      <p>ä½¿ç”¨æ ‡å‡†åŒ–å·¥å…·æè¿°APIï¼š</p>
      <pre><code>openapi: 3.0.0
paths:
  /users:
    post:
      summary: åˆ›å»ºç”¨æˆ·
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [username, email, password]
              properties:
                username:
                  type: string
                  minLength: 3
                  maxLength: 20
      responses:
        '201':
          description: ç”¨æˆ·åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'</code></pre>

      <h3>è®¾è®¡åŸåˆ™</h3>
      <ul>
        <li><strong>ä¸€è‡´æ€§</strong>ï¼šå‘½åã€é”™è¯¯ç ã€å“åº”æ ¼å¼ç»Ÿä¸€</li>
        <li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼š/v1/users ä¾¿äºæœªæ¥è¿­ä»£</li>
        <li><strong>å¹‚ç­‰æ€§</strong>ï¼šPUT/DELETEæ“ä½œå¯é‡å¤æ‰§è¡Œ</li>
        <li><strong>é”™è¯¯è¯¦ç»†</strong>ï¼šæä¾›å¯æ“ä½œçš„é”™è¯¯ä¿¡æ¯</li>
      </ul>

      <div class="quiz-section">
        <h3>ğŸ“ éšå ‚å°è€ƒ</h3>
        <div class="question">
          <h4>4. APIè§„æ ¼ä¸­æœ€é‡è¦çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
          <div class="options">
            <label class="option">
              <input type="radio" name="q4" value="A">
              <span>A. å“åº”é€Ÿåº¦è¶Šå¿«è¶Šå¥½</span>
            </label>
            <label class="option">
              <input type="radio" name="q4" value="B">
              <span>B. æ˜ç¡®çš„è¯·æ±‚/å“åº”æ ¼å¼å’Œé”™è¯¯å¤„ç†</span>
            </label>
            <label class="option">
              <input type="radio" name="q4" value="C">
              <span>C. ä½¿ç”¨æœ€æ–°çš„æŠ€æœ¯æ ˆ</span>
            </label>
            <label class="option">
              <input type="radio" name="q4" value="D">
              <span>D. ä¸éœ€è¦æ–‡æ¡£</span>
            </label>
          </div>
          <button class="check-btn" onclick="checkAnswer('q4', 'B', this)">æäº¤ç­”æ¡ˆ</button>
          <div class="result"></div>
        </div>
      </div>

      <div class="case-section">
        <h3>ğŸ’¼ å®æˆ˜æ¡ˆä¾‹</h3>
        <div class="case-study">
          <h4>åœºæ™¯ï¼šå›¾ç‰‡ä¸Šä¼ APIè®¾è®¡</h4>
          <p><strong>ä¸æ˜ç¡®çš„è®¾è®¡</strong>ï¼š"POST /upload ä¸Šä¼ æ–‡ä»¶"</p>
          <p><strong>SDDè§„æ ¼</strong>ï¼š</p>
          <pre><code>POST /api/v1/images
Content-Type: multipart/form-data
å‚æ•°ï¼š
  - file: File (å¿…é¡», 5MBä»¥å†…, jpg/png/gif)
  - alt: string (å¯é€‰, å›¾ç‰‡æè¿°)
æˆåŠŸå“åº” (200):
{
  "id": "img_abc123",
  "url": "https://cdn.example.com/abc123.jpg",
  "size": 1024000,
  "format": "jpeg"
}
é”™è¯¯ï¼š
  413: æ–‡ä»¶è¿‡å¤§
  415: ä¸æ”¯æŒçš„æ ¼å¼
  429: è¶…è¿‡æ¯æ—¥ä¸Šä¼ é™åˆ¶(100å¼ /ç”¨æˆ·)</code></pre>
          <p><strong>å¥½å¤„</strong>ï¼šå‰ç«¯çŸ¥é“å¦‚ä½•å¤„ç†ï¼Œåç«¯æœ‰æ¸…æ™°çš„å®ç°ç›®æ ‡ï¼Œæµ‹è¯•æœ‰æ˜ç¡®çš„éªŒè¯ç‚¹ï¼</p>
        </div>
      </div>

      <div class="references">
        <h3>ğŸ“š å‚è€ƒèµ„æ–™</h3>
        <ul>
          <li>ğŸ‡¨ğŸ‡³ ä¸­æ–‡ï¼š<a href="https://swagger.io/docs/specification/about/" target="_blank">OpenAPIè§„èŒƒä¸­æ–‡æŒ‡å—</a></li>
          <li>ğŸ‡ºğŸ‡¸ English: <a href="https://restfulapi.net/" target="_blank">REST API Tutorial</a></li>
        </ul>
      </div>
    </div>

    <!-- ç¬¬5è®² -->
    <div class="lesson" id="lesson5">
      <h2>ç¬¬5è®²ï¼šæ•°æ®æ¨¡å‹ä¸Schemaè®¾è®¡</h2>
      
      <p>æ•°æ®æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒèµ„äº§ï¼Œæ˜ç¡®çš„æ•°æ®æ¨¡å‹è§„æ ¼èƒ½é˜²æ­¢æ•°æ®ä¸ä¸€è‡´ã€ç±»å‹é”™è¯¯ç­‰é—®é¢˜ã€‚</p>

      <h3>æ•°æ®æ¨¡å‹è§„æ ¼è¦ç´ </h3>
      <pre><code>æ¨¡å‹åç§°ï¼šUser
æè¿°ï¼šç³»ç»Ÿç”¨æˆ·å®ä½“
å­—æ®µï¼š
  - id: UUID (ä¸»é”®, è‡ªåŠ¨ç”Ÿæˆ, ä¸å¯å˜)
  - username: string (å”¯ä¸€, 3-20å­—ç¬¦, ç´¢å¼•)
  - email: string (å”¯ä¸€, é‚®ç®±æ ¼å¼, ç´¢å¼•)
  - passwordHash: string (BCryptåŠ å¯†, ä¸å¯æŸ¥è¯¢)
  - createdAt: DateTime (è‡ªåŠ¨è®°å½•)
  - updatedAt: DateTime (è‡ªåŠ¨æ›´æ–°)
  - status: enum('active', 'suspended', 'deleted')
çº¦æŸï¼š
  - usernameå’Œemailå”¯ä¸€æ€§
  - åˆ é™¤ç”¨æˆ·æ—¶è½¯åˆ é™¤(status='deleted')
å…³ç³»ï¼š
  - User hasMany Posts (ä¸€å¯¹å¤š)
  - User hasMany Roles (å¤šå¯¹å¤š)</code></pre>

      <h3>SchemaéªŒè¯</h3>
      <p>ä½¿ç”¨å·¥å…·ç¡®ä¿æ•°æ®æœ‰æ•ˆæ€§ï¼š</p>
      <pre><code>// Zodç¤ºä¾‹
import { z } from 'zod';

const UserSchema = z.object({
  username: z.string().min(3).max(20).regex(/^[a-zA-Z0-9_]+$/),
  email: z.string().email(),
  password: z.string().min(8),
  age: z.number().int().positive().optional()
});

// è¿è¡Œæ—¶éªŒè¯
const result = UserSchema.safeParse(inputData);
if (!result.success) {
  console.error(result.error.errors);
}</code></pre>

      <h3>è¿ç§»ä¸ç‰ˆæœ¬æ§åˆ¶</h3>
      <p>æ•°æ®æ¨¡å‹å˜æ›´éœ€è¦è¿ç§»è„šæœ¬ï¼š</p>
      <pre><code>-- Migration: æ·»åŠ ç”¨æˆ·å¤´åƒå­—æ®µ
-- Version: 2024-01-15-add-avatar
ALTER TABLE users ADD COLUMN avatar_url VARCHAR(255);
ALTER TABLE users ADD COLUMN avatar_updated_at TIMESTAMP;

-- Rollback
ALTER TABLE users DROP COLUMN avatar_url;
ALTER TABLE users DROP COLUMN avatar_updated_at;</code></pre>

      <div class="quiz-section">
        <h3>ğŸ“ éšå ‚å°è€ƒ</h3>
        <div class="question">
          <h4>5. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨SchemaéªŒè¯ï¼Ÿ</h4>
          <div class="options">
            <label class="option">
              <input type="radio" name="q5" value="A">
              <span>A. è®©ä»£ç çœ‹èµ·æ¥æ›´å¤æ‚</span>
            </label>
            <label class="option">
              <input type="radio" name="q5" value="B">
              <span>B. åœ¨è¿è¡Œæ—¶æ•è·æ•°æ®ç±»å‹é”™è¯¯ï¼Œä¿è¯æ•°æ®è´¨é‡</span>
            </label>
            <label class="option">
              <input type="radio" name="q5" value="C">
              <span>C. æ›¿ä»£æ•°æ®åº“</span>
            </label>
            <label class="option">
              <input type="radio" name="q5" value="D">
              <span>D. åŠ å¿«æŸ¥è¯¢é€Ÿåº¦</span>
            </label>
          </div>
          <button class="check-btn" onclick="checkAnswer('q5', 'B', this)">æäº¤ç­”æ¡ˆ</button>
          <div class="result"></div>
        </div>
      </div>

      <div class="case-section">
        <h3>ğŸ’¼ å®æˆ˜æ¡ˆä¾‹</h3>
        <div class="case-study">
          <h4>åœºæ™¯ï¼šç”µå•†è®¢å•æ•°æ®æ¨¡å‹</h4>
          <p><strong>é—®é¢˜</strong>ï¼šè®¢å•çŠ¶æ€æ··ä¹±ï¼Œé‡‘é¢å­—æ®µç±»å‹ä¸ä¸€è‡´ï¼Œå¯¼è‡´è®¡ç®—é”™è¯¯ã€‚</p>
          <p><strong>SDDè§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
          <pre><code>æ¨¡å‹ï¼šOrder
å­—æ®µï¼š
  - id: UUID
  - userId: UUID (å¤–é”® â†’ users.id)
  - status: enum('pending','paid','shipped','completed','cancelled')
  - items: OrderItem[] (JSON, éªŒè¯éç©º)
  - subtotal: Decimal(10,2) (å°è®¡, ç²¾ç¡®åˆ°åˆ†)
  - tax: Decimal(10,2)
  - shipping: Decimal(10,2)
  - total: Decimal(10,2) (è®¡ç®—å±æ€§: subtotal+tax+shipping)
  - createdAt: DateTime
çº¦æŸï¼š
  - totalå¿…é¡» = subtotal + tax + shipping
  - statusè½¬æ¢è§„åˆ™ï¼špendingâ†’paidâ†’shippedâ†’completed
  - cancelledçŠ¶æ€ä¸å¯é€†
éªŒè¯ï¼š
  - ä½¿ç”¨Decimalé¿å…æµ®ç‚¹è¯¯å·®
  - çŠ¶æ€æœºæ¨¡å¼æ§åˆ¶æµè½¬
  - é‡‘é¢å­—æ®µç¦æ­¢æ‰‹åŠ¨ä¿®æ”¹ï¼Œé€šè¿‡è§¦å‘å™¨è®¡ç®—</code></pre>
        </div>
      </div>

      <div class="references">
        <h3>ğŸ“š å‚è€ƒèµ„æ–™</h3>
        <ul>
          <li>ğŸ‡¨ğŸ‡³ ä¸­æ–‡ï¼š<a href="https://juejin.cn/post/7038970528592453663" target="_blank">æ•°æ®åº“Schemaè®¾è®¡æœ€ä½³å®è·µ - æ˜é‡‘</a></li>
          <li>ğŸ‡ºğŸ‡¸ English: <a href="https://github.com/colinhacks/zod" target="_blank">Zod - TypeScript Schema Validation</a></li>
        </ul>
      </div>
    </div>

    <!-- ç¬¬6è®² -->
    <div class="lesson" id="lesson6">
      <h2>ç¬¬6è®²ï¼šå¹¶å‘ä¸çŠ¶æ€ç®¡ç†è§„æ ¼</h2>
      
      <p>ç°ä»£åº”ç”¨å¸¸æ¶‰åŠå¹¶å‘æ“ä½œï¼Œæ¸…æ™°çš„å¹¶å‘è§„æ ¼èƒ½é˜²æ­¢ç«æ€æ¡ä»¶ã€æ­»é”ç­‰é—®é¢˜ã€‚</p>

      <h3>å¹¶å‘åœºæ™¯è§„æ ¼è¦ç´ </h3>
      <pre><code>åŠŸèƒ½ï¼šåº“å­˜æ‰£å‡
åœºæ™¯ï¼šå¤šä¸ªç”¨æˆ·åŒæ—¶è´­ä¹°åŒä¸€å•†å“
å¹¶å‘é—®é¢˜ï¼šåº“å­˜è¶…å–
è§£å†³æ–¹æ¡ˆï¼š
  1. æ•°æ®åº“å±‚ï¼šä¹è§‚é”(versionå­—æ®µ)æˆ–æ‚²è§‚é”(SELECT FOR UPDATE)
  2. åº”ç”¨å±‚ï¼šRedisåˆ†å¸ƒå¼é”
è§„æ ¼ï¼š
  - è¯»å–åº“å­˜æ—¶è·å–é”
  - æ‰£å‡åº“å­˜æ—¶æ£€æŸ¥version
  - è‹¥versionä¸åŒ¹é…ï¼Œé‡è¯•æˆ–è¿”å›å¤±è´¥
  - æˆåŠŸåé‡Šæ”¾é”
ä¿è¯ï¼šåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªäº‹åŠ¡èƒ½ä¿®æ”¹åº“å­˜</code></pre>

      <h3>çŠ¶æ€æœºè§„æ ¼</h3>
      <p>å¤æ‚çŠ¶æ€è½¬æ¢éœ€æ˜ç¡®å®šä¹‰ï¼š</p>
      <pre><code>è®¢å•çŠ¶æ€æœºï¼š
åˆå§‹çŠ¶æ€ï¼šCREATED
å…è®¸è½¬æ¢ï¼š
  CREATED â†’ PAID (æ”¯ä»˜æˆåŠŸ)
  CREATED â†’ CANCELLED (ç”¨æˆ·å–æ¶ˆ)
  PAID â†’ SHIPPED (å•†å®¶å‘è´§)
  SHIPPED â†’ COMPLETED (ç”¨æˆ·ç¡®è®¤æ”¶è´§)
  PAID/SHIPPED â†’ REFUNDING (ç”³è¯·é€€æ¬¾)
  REFUNDING â†’ REFUNDED (é€€æ¬¾å®Œæˆ)
ä¸å…è®¸è½¬æ¢ï¼š
  COMPLETED â†’ PAID (å·²å®Œæˆä¸å¯å›é€€)
  CANCELLED â†’ PAID (å·²å–æ¶ˆä¸å¯æ”¯ä»˜)
å‰¯ä½œç”¨ï¼š
  PAID â†’ æ‰£å‡åº“å­˜, å‘é€é‚®ä»¶
  REFUNDED â†’ æ¢å¤åº“å­˜, è®°å½•æ—¥å¿—</code></pre>

      <h3>åˆ†å¸ƒå¼ä¸€è‡´æ€§</h3>
      <ul>
        <li><strong>ACIDäº‹åŠ¡</strong>ï¼šå•æ•°æ®åº“å¼ºä¸€è‡´</li>
        <li><strong>Sagaæ¨¡å¼</strong>ï¼šåˆ†å¸ƒå¼äº‹åŠ¡è¡¥å¿æœºåˆ¶</li>
        <li><strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼šå¼‚æ­¥å¤„ç†ï¼Œå®¹å¿çŸ­æš‚ä¸ä¸€è‡´</li>
      </ul>

      <div class="quiz-section">
        <h3>ğŸ“ éšå ‚å°è€ƒ</h3>
        <div class="question">
          <h4>6. ä¸ºä»€ä¹ˆå¹¶å‘æ“ä½œéœ€è¦æ˜ç¡®è§„æ ¼ï¼Ÿ</h4>
          <div class="options">
            <label class="option">
              <input type="radio" name="q6" value="A">
              <span>A. å¹¶å‘ä¼šè®©ä»£ç å˜æ…¢</span>
            </label>
            <label class="option">
              <input type="radio" name="q6" value="B">
              <span>B. é˜²æ­¢ç«æ€æ¡ä»¶ã€æ•°æ®ä¸ä¸€è‡´ç­‰é—®é¢˜</span>
            </label>
            <label class="option">
              <input type="radio" name="q6" value="C">
              <span>C. å¹¶å‘ä¸éœ€è¦ç‰¹æ®Šå¤„ç†</span>
            </label>
            <label class="option">
              <input type="radio" name="q6" value="D">
              <span>D. å•çº¿ç¨‹å°±èƒ½è§£å†³æ‰€æœ‰é—®é¢˜</span>
            </label>
          </div>
          <button class="check-btn" onclick="checkAnswer('q6', 'B', this)">æäº¤ç­”æ¡ˆ</button>
          <div class="result"></div>
        </div>
      </div>

      <div class="case-section">
        <h3>ğŸ’¼ å®æˆ˜æ¡ˆä¾‹</h3>
        <div class="case-study">
          <h4>åœºæ™¯ï¼šç§’æ€ç³»ç»Ÿ</h4>
          <p><strong>é—®é¢˜</strong>ï¼š1000ä»¶å•†å“ï¼Œ10000äººåŒæ—¶æŠ¢è´­ï¼Œå¦‚ä½•ä¿è¯ä¸è¶…å–ï¼Ÿ</p>
          <p><strong>SDDæ–¹æ¡ˆ</strong>ï¼š</p>
          <pre><code>è§„æ ¼ï¼š
1. é¢„çƒ­é˜¶æ®µï¼š
   - å°†åº“å­˜åŠ è½½åˆ°Redis: SET stock:item_123 1000
   - è®¾ç½®è¿‡æœŸæ—¶é—´ï¼š1å°æ—¶
   
2. æŠ¢è´­é˜¶æ®µï¼š
   - Luaè„šæœ¬ä¿è¯åŸå­æ€§ï¼š
     if redis.call('get', KEYS[1]) > 0 then
       redis.call('decr', KEYS[1])
       return 1
     else
       return 0
     end
   - æˆåŠŸè¿”å›1ï¼Œå¤±è´¥è¿”å›0
   
3. åç½®å¤„ç†ï¼š
   - å¼‚æ­¥å†™å…¥æ•°æ®åº“è®¢å•
   - ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å‰Šå³°
   
ä¿è¯ï¼š
   - RedisåŸå­æ“ä½œé˜²æ­¢è¶…å–
   - å•ç‚¹Redisæ€§èƒ½ç“¶é¢ˆï¼Ÿâ†’ Redis Cluster
   - æ•°æ®åº“å»¶è¿Ÿï¼Ÿâ†’ å¼‚æ­¥å¤„ç†ï¼Œæœ€ç»ˆä¸€è‡´æ€§</code></pre>
        </div>
      </div>

      <div class="references">
        <h3>ğŸ“š å‚è€ƒèµ„æ–™</h3>
        <ul>
          <li>ğŸ‡¨ğŸ‡³ ä¸­æ–‡ï¼š<a href="https://www.cnblogs.com/rjzheng/p/9134984.html" target="_blank">åˆ†å¸ƒå¼é”çš„å®ç°ä¸åº”ç”¨ - åšå®¢å›­</a></li>
          <li>ğŸ‡ºğŸ‡¸ English: <a href="https://martinfowler.com/articles/patterns-of-distributed-systems/" target="_blank">Patterns of Distributed Systems</a></li>
        </ul>
      </div>
    </div>

    <!-- ç¬¬7è®² -->
    <div class="lesson" id="lesson7">
      <h2>ç¬¬7è®²ï¼šæ€§èƒ½ä¸å¯æ‰©å±•æ€§è§„æ ¼</h2>
      
      <p>æ€§èƒ½æŒ‡æ ‡ä¹Ÿæ˜¯è§„æ ¼çš„ä¸€éƒ¨åˆ†ã€‚SDDä¸ä»…å®šä¹‰åŠŸèƒ½ï¼Œè¿˜å®šä¹‰<strong>éåŠŸèƒ½æ€§éœ€æ±‚</strong>ï¼ˆNFRï¼‰ã€‚</p>

      <h3>æ€§èƒ½è§„æ ¼è¦ç´ </h3>
      <pre><code>åŠŸèƒ½ï¼šç”¨æˆ·ç™»å½•
æ€§èƒ½éœ€æ±‚ï¼š
  - å“åº”æ—¶é—´ï¼šP95 < 200ms, P99 < 500ms
  - ååé‡ï¼šæ”¯æŒ 1000 req/s
  - å¹¶å‘ç”¨æˆ·ï¼š10000
  - å¯ç”¨æ€§ï¼š99.9% (æ¯æœˆåœæœº < 43åˆ†é’Ÿ)
æµ‹è¯•æ–¹æ³•ï¼š
  - å‹åŠ›æµ‹è¯•ï¼šApache JMeter / k6
  - ç›‘æ§æŒ‡æ ‡ï¼šPrometheus + Grafana
  - æŠ¥è­¦é˜ˆå€¼ï¼šå“åº”æ—¶é—´ > 500ms æŒç»­5åˆ†é’Ÿ
ä¼˜åŒ–ç­–ç•¥ï¼š
  - æ•°æ®åº“ç´¢å¼•ï¼šusername, email
  - ç¼“å­˜ï¼šRediså­˜å‚¨session, TTL=30åˆ†é’Ÿ
  - CDNï¼šé™æ€èµ„æºåŠ é€Ÿ
  - é™çº§æ–¹æ¡ˆï¼šé«˜å³°æœŸå…³é—­éæ ¸å¿ƒåŠŸèƒ½</code></pre>

      <h3>å¯æ‰©å±•æ€§è®¾è®¡</h3>
      <ul>
        <li><strong>æ°´å¹³æ‰©å±•</strong>ï¼šæ— çŠ¶æ€æœåŠ¡ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡å¢åŠ å®ä¾‹</li>
        <li><strong>æ•°æ®åº“åˆ†ç‰‡</strong>ï¼šæŒ‰ç”¨æˆ·IDèŒƒå›´åˆ†åº“</li>
        <li><strong>è¯»å†™åˆ†ç¦»</strong>ï¼šä¸»åº“å†™ï¼Œä»åº“è¯»</li>
        <li><strong>å¾®æœåŠ¡æ‹†åˆ†</strong>ï¼šæŒ‰ä¸šåŠ¡é¢†åŸŸè§£è€¦</li>
      </ul>

      <h3>å®¹é‡è§„åˆ’è§„æ ¼</h3>
      <pre><code>ç³»ç»Ÿï¼šç”µå•†å¹³å°
é¢„æœŸæµé‡ï¼š
  - æ—¥æ´»ç”¨æˆ·ï¼š100ä¸‡
  - é«˜å³°QPSï¼š5000
  - æ•°æ®å¢é•¿ï¼šæ¯å¤©500ä¸‡è®¢å•
èµ„æºéœ€æ±‚ï¼š
  - WebæœåŠ¡å™¨ï¼š20å°(4æ ¸8G)
  - æ•°æ®åº“ï¼šä¸»1ä»2(16æ ¸64G)
  - Redisï¼š4å°é›†ç¾¤(8æ ¸32G)
  - å­˜å‚¨ï¼š10TB (è®¢å•+æ—¥å¿—)
æˆæœ¬é¢„ç®—ï¼š$50000/æœˆ
ç›‘æ§ï¼šCPU > 70%, å†…å­˜ > 80% è§¦å‘è‡ªåŠ¨æ‰©å®¹</code></pre>

      <div class="quiz-section">
        <h3>ğŸ“ éšå ‚å°è€ƒ</h3>
        <div class="question">
          <h4>7. æ€§èƒ½è§„æ ¼ä¸­P95/P99æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</h4>
          <div class="options">
            <label class="option">
              <input type="radio" name="q7" value="A">
              <span>A. 95%å’Œ99%çš„ç”¨æˆ·æ»¡æ„åº¦</span>
            </label>
            <label class="option">
              <input type="radio" name="q7" value="B">
              <span>B. 95%å’Œ99%çš„è¯·æ±‚å“åº”æ—¶é—´ä½äºè¯¥é˜ˆå€¼</span>
            </label>
            <label class="option">
              <input type="radio" name="q7" value="C">
              <span>C. ç³»ç»Ÿæ­£å¸¸è¿è¡Œ95%å’Œ99%çš„æ—¶é—´</span>
            </label>
            <label class="option">
              <input type="radio" name="q7" value="D">
              <span>D. æ•°æ®åº“æŸ¥è¯¢å‘½ä¸­ç‡</span>
            </label>
          </div>
          <button class="check-btn" onclick="checkAnswer('q7', 'B', this)">æäº¤ç­”æ¡ˆ</button>
          <div class="result"></div>
        </div>
      </div>

      <div class="case-section">
        <h3>ğŸ’¼ å®æˆ˜æ¡ˆä¾‹</h3>
        <div class="case-study">
          <h4>åœºæ™¯ï¼šç¤¾äº¤åª’ä½“Feedæµæ€§èƒ½ä¼˜åŒ–</h4>
          <p><strong>é—®é¢˜</strong>ï¼šç”¨æˆ·å…³æ³¨500äººï¼ŒåŠ è½½é¦–é¡µæ…¢ï¼ˆ3ç§’+ï¼‰</p>
          <p><strong>SDDæ€§èƒ½è§„æ ¼</strong>ï¼š</p>
          <pre><code>ç›®æ ‡ï¼šé¦–é¡µåŠ è½½ < 500ms (P95)
æ–¹æ¡ˆï¼š
1. æ¨æ‹‰ç»“åˆæ¨¡å¼
   - å¤§Vå‘å¸–ï¼šæ¨é€åˆ°ç²‰ä¸æ”¶ä»¶ç®±(Push)
   - æ™®é€šç”¨æˆ·å‘å¸–ï¼šå®æ—¶æ‹‰å–(Pull)
   
2. ç¼“å­˜ç­–ç•¥
   - Rediså­˜å‚¨æœ€è¿‘20æ¡Feed: ZSETæŒ‰æ—¶é—´æ’åº
   - é¢„åŠ è½½ï¼šç”¨æˆ·ç™»å½•æ—¶å¼‚æ­¥åˆ·æ–°Feed
   
3. åˆ†é¡µä¼˜åŒ–
   - æ¸¸æ ‡åˆ†é¡µï¼Œé¿å…OFFSETæ·±åº¦ç¿»é¡µ
   - æ¯é¡µ20æ¡ï¼Œæ€»é‡ä¸Šé™500æ¡
   
4. æ•°æ®åº“ä¼˜åŒ–
   - å¤åˆç´¢å¼•ï¼š(user_id, created_at)
   - è¯»å†™åˆ†ç¦»ï¼šä»åº“æ‰¿è½½90%æŸ¥è¯¢
   
æµ‹è¯•éªŒè¯ï¼š
   - JMeteræ¨¡æ‹Ÿ10000ç”¨æˆ·å¹¶å‘
   - ç›‘æ§P95å“åº”æ—¶é—´ < 500ms
   - CPUä½¿ç”¨ç‡ < 60%</code></pre>
        </div>
      </div>

      <div class="references">
        <h3>ğŸ“š å‚è€ƒèµ„æ–™</h3>
        <ul>
          <li>ğŸ‡¨ğŸ‡³ ä¸­æ–‡ï¼š<a href="https://time.geekbang.org/column/intro/100003901" target="_blank">æ€§èƒ½å·¥ç¨‹é«˜æ‰‹è¯¾ - æå®¢æ—¶é—´</a></li>
          <li>ğŸ‡ºğŸ‡¸ English: <a href="https://www.brendangregg.com/blog/2020-07-15/systems-performance-2nd-edition.html" target="_blank">Systems Performance - Brendan Gregg</a></li>
        </ul>
      </div>
    </div>

    <!-- ç¬¬8è®² -->
    <div class="lesson" id="lesson8">
      <h2>ç¬¬8è®²ï¼šSDDåœ¨AIæ—¶ä»£çš„åº”ç”¨</h2>
      
      <p>AIç¼–ç¨‹å·¥å…·å…´èµ·åï¼ŒSDDå˜å¾—æ›´åŠ é‡è¦â€”â€”<strong>æ¸…æ™°çš„è§„æ ¼æ˜¯AIç”Ÿæˆé«˜è´¨é‡ä»£ç çš„å‰æ</strong>ã€‚</p>

      <h3>Prompt Engineeringä¸SDD</h3>
      <p>å°†éœ€æ±‚è½¬åŒ–ä¸ºç»“æ„åŒ–è§„æ ¼ï¼ŒAIèƒ½æ›´å‡†ç¡®åœ°ç”Ÿæˆä»£ç ï¼š</p>
      <pre><code>// ç³Ÿç³•çš„Prompt
"å†™ä¸€ä¸ªç”¨æˆ·æ³¨å†ŒåŠŸèƒ½"

// ä¼˜ç§€çš„Promptï¼ˆSDDé£æ ¼ï¼‰
"""
åˆ›å»ºç”¨æˆ·æ³¨å†ŒAPIï¼Œè§„æ ¼å¦‚ä¸‹ï¼š
ç«¯ç‚¹ï¼šPOST /api/register
è¾“å…¥ï¼š{ username: string(3-20), email: string, password: string(8+) }
éªŒè¯ï¼š
  - usernameå”¯ä¸€ï¼Œä»…å­—æ¯æ•°å­—ä¸‹åˆ’çº¿
  - emailæ ¼å¼æœ‰æ•ˆä¸”å”¯ä¸€
  - passwordéœ€å«å¤§å°å†™å­—æ¯+æ•°å­—
å¤„ç†ï¼š
  - ä½¿ç”¨bcryptåŠ å¯†å¯†ç (saltRounds=10)
  - å­˜å‚¨åˆ°PostgreSQL usersè¡¨
  - è¿”å›JWT token (HS256, 7å¤©è¿‡æœŸ)
é”™è¯¯ï¼š
  - 400: å‚æ•°éªŒè¯å¤±è´¥ï¼Œè¿”å›å…·ä½“å­—æ®µé”™è¯¯
  - 409: ç”¨æˆ·å/é‚®ç®±å·²å­˜åœ¨
  - 500: æ•°æ®åº“é”™è¯¯
æŠ€æœ¯æ ˆï¼šNode.js + Express + Zod + Prisma
"""</code></pre>

      <h3>AIè¾…åŠ©çš„SDDæµç¨‹</h3>
      <ul>
        <li><strong>éœ€æ±‚åˆ†æ</strong>ï¼šAIå¸®åŠ©ç»†åŒ–æ¨¡ç³Šéœ€æ±‚</li>
        <li><strong>è§„æ ¼ç”Ÿæˆ</strong>ï¼šä»ç”¨æˆ·æ•…äº‹ç”ŸæˆæŠ€æœ¯è§„æ ¼</li>
        <li><strong>ä»£ç ç”Ÿæˆ</strong>ï¼šåŸºäºè§„æ ¼ç”Ÿæˆå®ç°</li>
        <li><strong>æµ‹è¯•ç”Ÿæˆ</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆå•å…ƒæµ‹è¯•</li>
        <li><strong>æ–‡æ¡£ç”Ÿæˆ</strong>ï¼šä»ä»£ç åå‘ç”ŸæˆAPIæ–‡æ¡£</li>
      </ul>

      <h3>äººæœºåä½œæ¨¡å¼</h3>
      <pre><code>1. äººç±»ï¼šå®šä¹‰ä¸šåŠ¡éœ€æ±‚å’Œæ ¸å¿ƒè§„æ ¼
2. AIï¼šç”Ÿæˆè¯¦ç»†æŠ€æœ¯è§„æ ¼å’Œä¼ªä»£ç 
3. äººç±»ï¼šå®¡æŸ¥å¹¶ä¿®æ­£è§„æ ¼
4. AIï¼šç”Ÿæˆå®ç°ä»£ç 
5. äººç±»ï¼šä»£ç å®¡æŸ¥ï¼Œè¿è¡Œæµ‹è¯•
6. AIï¼šæ ¹æ®åé¦ˆè¿­ä»£ä¼˜åŒ–
7. äººç±»ï¼šæœ€ç»ˆéªŒæ”¶ä¸éƒ¨ç½²</code></pre>

      <h3>SDD vs Vibe Coding in AI Era</h3>
      <table style="width:100%; border-collapse: collapse; margin: 20px 0;">
        <thead>
          <tr style="background: rgba(15,76,117,0.3);">
            <th style="padding: 12px; border: 1px solid var(--accent);">ç»´åº¦</th>
            <th style="padding: 12px; border: 1px solid var(--accent);">Vibe Coding</th>
            <th style="padding: 12px; border: 1px solid var(--accent);">SDD</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding: 10px; border: 1px solid var(--accent);">æç¤ºè¯</td>
            <td style="padding: 10px; border: 1px solid var(--accent);">æ¨¡ç³Šæè¿°</td>
            <td style="padding: 10px; border: 1px solid var(--accent);">ç»“æ„åŒ–è§„æ ¼</td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid var(--accent);">ä»£ç è´¨é‡</td>
            <td style="padding: 10px; border: 1px solid var(--accent);">éšæœºæ€§å¤§</td>
            <td style="padding: 10px; border: 1px solid var(--accent);">å¯é¢„æµ‹ã€ä¸€è‡´</td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid var(--accent);">è¿­ä»£æ•ˆç‡</td>
            <td style="padding: 10px; border: 1px solid var(--accent);">å¤šæ¬¡è¿”å·¥</td>
            <td style="padding: 10px; border: 1px solid var(--accent);">ä¸€æ¬¡ç”Ÿæˆæ¥è¿‘ç›®æ ‡</td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid var(--accent);">å¯ç»´æŠ¤æ€§</td>
            <td style="padding: 10px; border: 1px solid var(--accent);">éš¾ä»¥ç†è§£</td>
            <td style="padding: 10px; border: 1px solid var(--accent);">æ–‡æ¡£å®Œæ•´</td>
          </tr>
        </tbody>
      </table>

      <h3>æœªæ¥è¶‹åŠ¿</h3>
      <p>éšç€AIèƒ½åŠ›æå‡ï¼ŒSDDå°†æ¼”è¿›ä¸ºï¼š</p>
      <ul>
        <li><strong>å¯æ‰§è¡Œè§„æ ¼</strong>ï¼šè§„æ ¼æœ¬èº«å¯è¿è¡Œæµ‹è¯•</li>
        <li><strong>å½¢å¼åŒ–éªŒè¯</strong>ï¼šæ•°å­¦è¯æ˜ä»£ç æ­£ç¡®æ€§</li>
        <li><strong>è§„æ ¼å¸‚åœº</strong>ï¼šå¤ç”¨é«˜è´¨é‡çš„è§„æ ¼æ¨¡æ¿</li>
      </ul>

      <div class="quiz-section">
        <h3>ğŸ“ éšå ‚å°è€ƒ</h3>
        <div class="question">
          <h4>8. åœ¨AIç¼–ç¨‹æ—¶ä»£ï¼Œä¸ºä»€ä¹ˆSDDæ›´é‡è¦ï¼Ÿ</h4>
          <div class="options">
            <label class="option">
              <input type="radio" name="q8" value="A">
              <span>A. AIä¸éœ€è¦è§„æ ¼</span>
            </label>
            <label class="option">
              <input type="radio" name="q8" value="B">
              <span>B. æ¸…æ™°è§„æ ¼è®©AIç”Ÿæˆæ›´å‡†ç¡®çš„ä»£ç </span>
            </label>
            <label class="option">
              <input type="radio" name="q8" value="C">
              <span>C. SDDä¼šè¢«AIå–ä»£</span>
            </label>
            <label class="option">
              <input type="radio" name="q8" value="D">
              <span>D. åªéœ€è¦è‡ªç„¶è¯­è¨€æè¿°</span>
            </label>
          </div>
          <button class="check-btn" onclick="checkAnswer('q8', 'B', this)">æäº¤ç­”æ¡ˆ</button>
          <div class="result"></div>
        </div>
      </div>

      <div class="case-section">
        <h3>ğŸ’¼ å®æˆ˜æ¡ˆä¾‹</h3>
        <div class="case-study">
          <h4>åœºæ™¯ï¼šä½¿ç”¨AIç”Ÿæˆå®Œæ•´åç«¯æœåŠ¡</h4>
          <p><strong>ä»»åŠ¡</strong>ï¼šå¼€å‘ä¸€ä¸ªåšå®¢ç³»ç»Ÿçš„åç«¯API</p>
          <p><strong>ä¼ ç»ŸVibeæ–¹å¼</strong>ï¼š</p>
          <p>"AIï¼Œå¸®æˆ‘å†™ä¸€ä¸ªåšå®¢åç«¯" â†’ AIç”Ÿæˆæ··ä¹±ä»£ç  â†’ è°ƒè¯•2å¤©</p>
          <p><strong>SDDæ–¹å¼</strong>ï¼š</p>
          <pre><code>Step 1: å®šä¹‰å®Œæ•´è§„æ ¼æ–‡æ¡£
---
ç³»ç»Ÿï¼šåšå®¢ç®¡ç†ç³»ç»Ÿ
åŠŸèƒ½æ¨¡å—ï¼š
1. ç”¨æˆ·ç®¡ç†ï¼ˆæ³¨å†Œ/ç™»å½•/æƒé™ï¼‰
2. æ–‡ç« ç®¡ç†ï¼ˆCRUD + åˆ†ç±»æ ‡ç­¾ï¼‰
3. è¯„è®ºç³»ç»Ÿï¼ˆåµŒå¥—å›å¤ + å®¡æ ¸ï¼‰

æŠ€æœ¯æ ˆï¼š
- è¯­è¨€ï¼šTypeScript
- æ¡†æ¶ï¼šNestJS
- æ•°æ®åº“ï¼šPostgreSQL + Prisma
- è®¤è¯ï¼šJWT
- ç¼“å­˜ï¼šRedis

æ•°æ®æ¨¡å‹ï¼š
User: id, username, email, passwordHash, role(admin/user)
Post: id, title, content, authorId, status(draft/published)
Comment: id, postId, userId, parentId, content, approved

APIç«¯ç‚¹ï¼š
[è¯¦ç»†çš„æ¯ä¸ªç«¯ç‚¹è§„æ ¼...]

æ€§èƒ½è¦æ±‚ï¼š
- æ–‡ç« åˆ—è¡¨æŸ¥è¯¢ < 100ms
- æ”¯æŒ10000æ—¥æ´»

---
Step 2: è®©AIç”Ÿæˆä»£ç 
"æ ¹æ®ä¸Šè¿°è§„æ ¼ï¼Œç”Ÿæˆå®Œæ•´çš„NestJSé¡¹ç›®ï¼ŒåŒ…æ‹¬ï¼š
 - å®Œæ•´çš„ç›®å½•ç»“æ„
 - æ‰€æœ‰Controller/Service/DTO
 - Prisma Schema
 - å•å…ƒæµ‹è¯•
 - OpenAPIæ–‡æ¡£"

Step 3: éªŒè¯ä¸è¿­ä»£
- AIç”ŸæˆåŸºç¡€ä»£ç 
- äººå·¥å®¡æŸ¥å…³é”®é€»è¾‘
- è¿è¡Œæµ‹è¯•å¥—ä»¶
- æ ¹æ®æµ‹è¯•ç»“æœè°ƒæ•´

ç»“æœï¼š90%çš„ä»£ç ä¸€æ¬¡ç”Ÿæˆæ­£ç¡®ï¼Œåªéœ€å¾®è°ƒç»†èŠ‚ï¼</code></pre>
        </div>
      </div>

      <div class="references">
        <h3>ğŸ“š å‚è€ƒèµ„æ–™</h3>
        <ul>
          <li>ğŸ‡¨ğŸ‡³ ä¸­æ–‡ï¼š<a href="https://zhuanlan.zhihu.com/p/646825207" target="_blank">AIç¼–ç¨‹æ—¶ä»£çš„è½¯ä»¶å·¥ç¨‹ - çŸ¥ä¹ä¸“æ </a></li>
          <li>ğŸ‡ºğŸ‡¸ English: <a href="https://github.blog/2023-06-20-how-to-write-better-prompts-for-github-copilot/" target="_blank">How to Write Better Prompts for GitHub Copilot</a></li>
        </ul>
      </div>
    </div>
  </div>

  <!-- AIåŠ©æ‰‹ -->
  <div class="ai-assistant">
    <button class="ai-toggle" onclick="toggleAI()">ğŸ¤–</button>
    <div class="ai-panel" id="aiPanel">
      <h3>SDDæ™ºèƒ½åŠ©æ•™ / AI Teaching Assistant</h3>
      <div class="lang-selector">
        <button class="lang-btn active" data-lang="auto" onclick="setLanguage('auto')">ğŸŒ è‡ªåŠ¨æ£€æµ‹</button>
        <button class="lang-btn" data-lang="zh" onclick="setLanguage('zh')">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</button>
        <button class="lang-btn" data-lang="en" onclick="setLanguage('en')">ğŸ‡ºğŸ‡¸ English</button>
      </div>
      <div class="input-group">
        <input type="text" id="userInput" placeholder="è¾“å…¥é—®é¢˜æˆ–ç‚¹å‡»è¯­éŸ³... / Type your question or use voice...">
        <button class="voice-btn" id="voiceBtn" onclick="toggleVoice()">ğŸ¤</button>
        <button class="send-btn" onclick="sendMessage()">ğŸ“¤</button>
      </div>
      <div id="aiResponse">æˆ‘æ˜¯ä½ çš„SDDåŠ©æ•™ï¼æœ‰ä»»ä½•ç–‘é—®éšæ—¶é—®æˆ‘ ğŸ˜Š<br>I'm your SDD teaching assistant! Feel free to ask me anything ğŸ˜Š</div>
      <button class="tts-btn" id="ttsBtn" onclick="speakResponse()">ğŸ”Š æœ—è¯»å›ç­” / Read Aloud</button>
    </div>
  </div>

  <script>
    // åˆ‡æ¢è¯¾ç¨‹
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.lesson').forEach(l => l.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById('lesson' + btn.dataset.lesson).classList.add('active');
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });

    // æ£€æŸ¥ç­”æ¡ˆ
    function checkAnswer(questionName, correctAnswer, button) {
      const selected = document.querySelector(`input[name="${questionName}"]:checked`);
      const resultDiv = button.nextElementSibling;
      
      if (!selected) {
        alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆï¼');
        return;
      }

      if (selected.value === correctAnswer) {
        resultDiv.textContent = 'âœ… å›ç­”æ­£ç¡®ï¼å¾ˆå¥½åœ°ç†è§£äº†è¿™ä¸ªæ¦‚å¿µï¼';
        resultDiv.className = 'result correct';
      } else {
        resultDiv.textContent = 'âŒ ç­”æ¡ˆä¸æ­£ç¡®ï¼Œè¯·é‡æ–°æ€è€ƒæˆ–æŸ¥çœ‹è¯¾ç¨‹å†…å®¹ã€‚';
        resultDiv.className = 'result incorrect';
      }
    }

    // AIåŠ©æ‰‹
    let isAIOpen = false;
    let isRecording = false;
    let recognition = null;
    let currentResponse = '';
    let currentLanguage = 'auto'; // 'auto', 'zh', 'en'
    let detectedLanguage = 'zh'; // å­˜å‚¨æ£€æµ‹åˆ°çš„è¯­è¨€

    // è®¾ç½®è¯­è¨€
    function setLanguage(lang) {
      currentLanguage = lang;
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
      });
      
      // æ›´æ–°è¯­éŸ³è¯†åˆ«è¯­è¨€
      if (recognition) {
        if (lang === 'zh' || (lang === 'auto' && detectedLanguage === 'zh')) {
          recognition.lang = 'zh-CN';
        } else if (lang === 'en' || (lang === 'auto' && detectedLanguage === 'en')) {
          recognition.lang = 'en-US';
        }
      }
    }

    function toggleAI() {
      isAIOpen = !isAIOpen;
      document.getElementById('aiPanel').classList.toggle('active', isAIOpen);
    }

    // åˆå§‹åŒ–è¯­éŸ³è¯†åˆ«
    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      recognition = new SpeechRecognition();
      recognition.lang = 'zh-CN'; // é»˜è®¤ä¸­æ–‡
      recognition.continuous = false;
      recognition.interimResults = false;

      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        document.getElementById('userInput').value = transcript;
        
        // æ£€æµ‹è¾“å…¥è¯­è¨€
        const hasChinese = /[\u4e00-\u9fa5]/.test(transcript);
        detectedLanguage = hasChinese ? 'zh' : 'en';
        
        sendMessage();
      };

      recognition.onerror = (event) => {
        console.error('Speech recognition error:', event.error);
        const errorMsg = detectedLanguage === 'zh' 
          ? 'è¯­éŸ³è¯†åˆ«å¤±è´¥ï¼š' + event.error
          : 'Speech recognition failed: ' + event.error;
        alert(errorMsg);
        stopRecording();
      };

      recognition.onend = () => {
        stopRecording();
      };
    }

    function toggleVoice() {
      if (!recognition) {
        const msg = detectedLanguage === 'zh'
          ? 'æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«åŠŸèƒ½ï¼Œè¯·ä½¿ç”¨Chromeæµè§ˆå™¨'
          : 'Your browser does not support speech recognition. Please use Chrome browser.';
        alert(msg);
        return;
      }

      if (isRecording) {
        recognition.stop();
      } else {
        // æ ¹æ®å½“å‰è¯­è¨€è®¾ç½®è¯†åˆ«è¯­è¨€
        if (currentLanguage === 'zh') {
          recognition.lang = 'zh-CN';
        } else if (currentLanguage === 'en') {
          recognition.lang = 'en-US';
        } else {
          // è‡ªåŠ¨æ¨¡å¼ä¸‹é»˜è®¤ä½¿ç”¨ä¸Šæ¬¡æ£€æµ‹çš„è¯­è¨€
          recognition.lang = detectedLanguage === 'zh' ? 'zh-CN' : 'en-US';
        }
        
        recognition.start();
        isRecording = true;
        document.getElementById('voiceBtn').classList.add('recording');
        document.getElementById('voiceBtn').textContent = 'â¹ï¸';
      }
    }

    function stopRecording() {
      isRecording = false;
      document.getElementById('voiceBtn').classList.remove('recording');
      document.getElementById('voiceBtn').textContent = 'ğŸ¤';
    }

    async function sendMessage() {
      const input = document.getElementById('userInput');
      const message = input.value.trim();
      
      if (!message) return;

      // æ£€æµ‹æ¶ˆæ¯è¯­è¨€
      const hasChinese = /[\u4e00-\u9fa5]/.test(message);
      const messageLanguage = hasChinese ? 'zh' : 'en';
      detectedLanguage = messageLanguage;

      const responseDiv = document.getElementById('aiResponse');
      const thinkingText = messageLanguage === 'zh' ? 'æ€è€ƒä¸­...' : 'Thinking...';
      responseDiv.textContent = thinkingText;
      document.getElementById('ttsBtn').classList.remove('active');

      try {
        // æ·»åŠ 30ç§’è¶…æ—¶
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 30000);
        
        const response = await fetch('/.netlify/functions/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message }),
          signal: controller.signal
        });
        
        clearTimeout(timeoutId);

        if (!response.ok) {
          throw new Error(`æœåŠ¡å™¨è¿”å›é”™è¯¯: ${response.status}`);
        }

        const data = await response.json();
        currentResponse = data.reply || (messageLanguage === 'zh' 
          ? 'æŠ±æ­‰ï¼Œæˆ‘æš‚æ—¶æ— æ³•å›ç­”è¿™ä¸ªé—®é¢˜ã€‚' 
          : 'Sorry, I cannot answer this question at the moment.');
        
        // å­˜å‚¨è¿”å›çš„è¯­è¨€ä¿¡æ¯
        if (data.language) {
          detectedLanguage = data.language;
        }
        
        responseDiv.textContent = currentResponse;
        document.getElementById('ttsBtn').classList.add('active');
        
        // é‡ç½®TTSæŒ‰é’®æ–‡æœ¬
        updateTTSButton(false);
      } catch (error) {
        let errorText;
        if (error.name === 'AbortError') {
          errorText = messageLanguage === 'zh'
            ? 'â±ï¸ è¯·æ±‚è¶…æ—¶ï¼Œè¯·é‡è¯•ã€‚å¦‚æœé—®é¢˜æŒç»­ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ã€‚'
            : 'â±ï¸ Request timeout, please try again. If the problem persists, check your network connection.';
        } else if (error.message.includes('504') || error.message.includes('502')) {
          errorText = messageLanguage === 'zh'
            ? 'âš ï¸ æœåŠ¡å™¨ç½‘å…³è¶…æ—¶ã€‚å¯èƒ½åŸå› ï¼š\nâ€¢ APIå¯†é’¥æœªé…ç½®\nâ€¢ DeepSeekæœåŠ¡ç¹å¿™\nè¯·ç¨åé‡è¯•æˆ–è”ç³»ç®¡ç†å‘˜ã€‚'
            : 'âš ï¸ Gateway timeout. Possible reasons:\nâ€¢ API key not configured\nâ€¢ DeepSeek service busy\nPlease retry later or contact admin.';
        } else {
          errorText = messageLanguage === 'zh'
            ? `âŒ ç½‘ç»œé”™è¯¯ï¼š${error.message}\nè¯·æ£€æŸ¥ï¼š\n1. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸\n2. Netlifyç¯å¢ƒå˜é‡DEEPSEEK_API_KEYæ˜¯å¦å·²é…ç½®\n3. APIå¯†é’¥æ˜¯å¦æœ‰æ•ˆ`
            : `âŒ Network error: ${error.message}\nPlease check:\n1. Network connection\n2. DEEPSEEK_API_KEY in Netlify env vars\n3. API key validity`;
        }
        responseDiv.textContent = errorText;
        console.error('AI request failed:', error);
      }

      input.value = '';
    }

    // TTSåŠŸèƒ½
    let isSpeaking = false;
    
    function speakResponse() {
      if (!currentResponse) return;

      if ('speechSynthesis' in window) {
        // å¦‚æœæ­£åœ¨æœ—è¯»ï¼Œç‚¹å‡»æŒ‰é’®åœæ­¢
        if (isSpeaking) {
          window.speechSynthesis.cancel();
          isSpeaking = false;
          updateTTSButton(false);
          return;
        }

        // æ¸…ç†æ–‡æœ¬ï¼šç§»é™¤å„ç§ç¬¦å·ï¼Œåªä¿ç•™æ–‡å­—å’ŒåŸºæœ¬æ ‡ç‚¹
        let cleanText = currentResponse
          // ç§»é™¤Markdownç¬¦å·
          .replace(/[*_#`~\[\]]/g, '')
          // ç§»é™¤ä»£ç å—æ ‡è®°
          .replace(/```[\s\S]*?```/g, '')
          // ç§»é™¤HTMLæ ‡ç­¾
          .replace(/<[^>]*>/g, '')
          // ç§»é™¤ç‰¹æ®Šç¬¦å·ä½†ä¿ç•™åŸºæœ¬æ ‡ç‚¹
          .replace(/[-â€“â€”]/g, ' ')  // å°†å„ç§æ¨ªçº¿æ›¿æ¢ä¸ºç©ºæ ¼
          .replace(/[â€¢Â·]/g, ' ')   // å°†åˆ—è¡¨ç¬¦å·æ›¿æ¢ä¸ºç©ºæ ¼
          .replace(/[(){}\[\]]/g, '') // ç§»é™¤æ‹¬å·
          // ç§»é™¤å¤šä½™ç©ºæ ¼
          .replace(/\s+/g, ' ')
          .trim();

        // å¦‚æœæ¸…ç†åæ²¡æœ‰å†…å®¹ï¼Œä¸æœ—è¯»
        if (!cleanText) {
          const errorMsg = detectedLanguage === 'zh'
            ? 'æ²¡æœ‰å¯æœ—è¯»çš„æ–‡æœ¬å†…å®¹'
            : 'No text content to read';
          alert(errorMsg);
          return;
        }

        const utterance = new SpeechSynthesisUtterance(cleanText);
        
        // æ ¹æ®æ£€æµ‹åˆ°çš„è¯­è¨€è®¾ç½®TTSè¯­è¨€
        utterance.lang = detectedLanguage === 'zh' ? 'zh-CN' : 'en-US';
        utterance.rate = 0.9;
        utterance.pitch = 1;
        
        // ç›‘å¬æœ—è¯»å¼€å§‹
        utterance.onstart = () => {
          isSpeaking = true;
          updateTTSButton(true);
        };
        
        // ç›‘å¬æœ—è¯»ç»“æŸ
        utterance.onend = () => {
          isSpeaking = false;
          updateTTSButton(false);
        };
        
        // ç›‘å¬æœ—è¯»é”™è¯¯
        utterance.onerror = () => {
          isSpeaking = false;
          updateTTSButton(false);
        };
        
        window.speechSynthesis.speak(utterance);
      } else {
        const errorMsg = detectedLanguage === 'zh'
          ? 'æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³æœ—è¯»åŠŸèƒ½'
          : 'Your browser does not support text-to-speech';
        alert(errorMsg);
      }
    }

    // æ›´æ–°TTSæŒ‰é’®çŠ¶æ€
    function updateTTSButton(speaking) {
      const btn = document.getElementById('ttsBtn');
      if (speaking) {
        btn.textContent = detectedLanguage === 'zh' 
          ? 'â¹ï¸ åœæ­¢æœ—è¯»' 
          : 'â¹ï¸ Stop Reading';
        btn.style.background = 'var(--warning)';
      } else {
        btn.textContent = detectedLanguage === 'zh' 
          ? 'ğŸ”Š æœ—è¯»å›ç­”' 
          : 'ğŸ”Š Read Aloud';
        btn.style.background = 'var(--success)';
      }
    }

    // å›è½¦å‘é€
    document.getElementById('userInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });
  </script>
</body>
</html>